<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spanish’s aim to learn — Matching</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/FusionStyleFX/sashko/main/spain.png">
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#94a3b8; --accent:#7c3aed; --glass: rgba(255,255,255,0.04);
      --success:#16a34a; --danger:#ef4444; --disabled:#6b7280; --button:#0ea5a4;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.12), transparent),
                  radial-gradient(900px 400px at 90% 90%, rgba(14,165,164,0.06), transparent),
                  var(--bg);
      color:#e6eef8; -webkit-font-smoothing:antialiased;
      display:flex; align-items:center; justify-content:center; padding:32px;
    }
    .shell{
      width:980px; max-width:94vw; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px; padding:28px; box-shadow:0 10px 30px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);
    }
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    h1{margin:0; font-size:20px; letter-spacing:-0.2px}
    .subtitle{color:var(--muted); font-size:13px}
    .board{display:grid; grid-template-columns:1fr 260px 1fr; gap:18px; align-items:center; margin-top:22px}
    .column{background:var(--card); border-radius:12px; padding:12px; box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);}
    .col-title{font-size:13px; color:var(--muted); padding:6px 10px}
    .list{display:flex; flex-direction:column; gap:12px; padding:8px}
    .word-btn{
      background:var(--glass); border:1px solid rgba(255,255,255,0.03); color:#e6eef8;
      padding:14px 18px; border-radius:10px; text-align:left; font-weight:600; font-size:16px; cursor:pointer; transition:transform .08s ease, box-shadow .12s ease, background .25s ease, opacity .25s ease;
      box-shadow: 0 6px 14px rgba(2,6,23,0.6);
      user-select:none; outline:none;
      display:flex; align-items:center; justify-content:space-between;
    }
    .word-btn:active{transform:translateY(2px) scale(.997)}
    .word-btn.pressed{transform: translateY(2px) scale(.995); box-shadow: 0 4px 8px rgba(2,6,23,0.5);}
    .word-btn.matched{background:linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06)); border-color: rgba(16,185,129,0.3); color:var(--success);}
    .word-btn.wrong{background:linear-gradient(90deg, rgba(239,68,68,0.08), rgba(239,68,68,0.04)); border-color: rgba(239,68,68,0.25); color:var(--danger);}
    .word-btn.disabled{background:transparent; border:1px dashed rgba(255,255,255,0.03); color:var(--disabled); cursor:default; opacity:0.9}
    .center-hint{display:flex; flex-direction:column; align-items:center; gap:12px}
    .pill{background:rgba(255,255,255,0.02); padding:10px 14px; border-radius:999px; font-size:13px; color:var(--muted);}
    .progress{height:8px; width:220px; background:rgba(255,255,255,0.03); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; background:linear-gradient(90deg,var(--accent), var(--button)); width:0%; transition:width .9s ease}
    footer{display:flex; align-items:center; justify-content:space-between; margin-top:20px; flex-wrap:wrap; gap:10px}
    .stats{color:var(--muted); font-size:13px}
    .btn{background:linear-gradient(90deg,var(--accent), #5eead4); color:#071028; padding:10px 14px; border-radius:10px; border:none; font-weight:700; cursor:pointer}

    /* modal */
    .modal-backdrop{position:fixed; inset:0; background:rgba(2,6,23,0.6); display:flex; align-items:center; justify-content:center; z-index:40}
    .modal{background:linear-gradient(180deg,#071129, #071229); width:420px; max-width:92vw; border-radius:12px; padding:18px; border:1px solid rgba(255,255,255,0.04); box-shadow:0 12px 40px rgba(2,6,23,0.8); color:#e6eef8}
    .modal .x{position:absolute; right:18px; top:14px; background:transparent; border:none; color:var(--muted); font-size:20px; cursor:pointer}
    .modal h2{margin:6px 0 2px 0}
    .modal .big{font-size:34px; font-weight:800; color:var(--accent)}
    .modal .row{display:flex; justify-content:space-between; gap:10px; margin-top:12px}
    .stat-card{flex:1; background:rgba(255,255,255,0.02); padding:12px; border-radius:10px; text-align:center}
    .stat-card .label{font-size:13px; color:var(--muted)}
    .stat-card .value{font-weight:800; font-size:18px}

    /* charming micro animations */
    .fade-in{animation:fadeIn .9s ease both}
    @keyframes fadeIn{from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none}}
    .fade-out{animation:fadeOut .3s ease both}
    @keyframes fadeOut{from{opacity:1}to{opacity:0; transform:scale(.98)}}

    /* --- Mobile-friendly layout --- */
    @media (max-width: 768px) {
      body { padding: 16px; align-items: flex-start; }
      .shell { width: 100%; padding: 20px; }
      header { flex-direction: column; text-align: center; }
      .board {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
      }
      .center-hint {
        order: -1;
        flex-direction: column;
        text-align: center;
        margin-bottom: 8px;
      }
      .column {
        width: 100%;
        padding: 10px;
      }
      .col-title { text-align: center; }
      .list { gap: 10px; }
      .word-btn { font-size: 15px; padding: 12px 14px; }
      footer { flex-direction: column; text-align: center; }
      .progress { width: 100%; max-width: 300px; }
    }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <div>
        <h1>Испански ⇄ български — съвпадане</h1>
        <div class="subtitle">Посветено на Сашко, 9 окт, 2025 г..</div>
      </div>
      <div style="text-align:right">
        <div class="subtitle">Думи от Сервантес канала</div>
        <div style="height:6px"></div>
        <div class="pill">Една забележка: ако тръгнеш да отбелязваш друг отговор, когато ефектът не е свършил, след като си отбелязал правилния, ще ти го зачете като грешно.</div>
      </div>
    </header>

    <main class="board" aria-live="polite">
      <section class="column" id="left-col">
        <div class="col-title">Español</div>
        <div class="list" id="left-list"></div>
      </section>

      <div class="center-hint">
        <div class="pill">Find the match</div>
        <div class="progress" aria-hidden="true"><i id="progress-bar"></i></div>
        <div class="subtitle" id="remaining">Remaining: 0</div>
      </div>

      <section class="column" id="right-col">
        <div class="col-title">Български</div>
        <div class="list" id="right-list"></div>
      </section>
    </main>

    <footer>
      <div class="stats">Correct: <span id="correct-count">0</span> — Wrong: <span id="wrong-count">0</span></div>
      <div>
        <button class="btn" id="restart">Restart</button>
      </div>
    </footer>
  </div>

  <div id="modal-root"></div>

  <script>
    (function(){
    	
      // vocabulary pool (spanish -> bulgarian)
      const POOL = [
  { "es": "apuntarse", "bg": "записвам се", "part": "глагол" },
  { "es": "inscribirse", "bg": "записвам се", "part": "глагол" },
  { "es": "matricularse", "bg": "записвам се", "part": "глагол" },

  { "es": "parchís", "bg": "не се сърди човече", "part": "съществително" },
  { "es": "las prendas", "bg": "дрехи", "part": "съществително" },
  { "es": "la ropa", "bg": "дрехи", "part": "съществително" },
  { "es": "sobre todo", "bg": "най-вече", "part": "израз" },
  { "es": "mediante", "bg": "посредством, чрез", "part": "предлог" },
  { "es": "una actividad de entretenimiento", "bg": "развлекателна дейност", "part": "съществително словосъчетание" },
  { "es": "a la venta", "bg": "на разположение, в продажба", "part": "израз" },
  { "es": "la tapa de un libro", "bg": "корица на книга", "part": "съществително словосъчетание" },

  { "es": "pegar", "bg": "бия се, лепя", "part": "глагол" },
  { "es": "recortar", "bg": "изрязвам", "part": "глагол" },
  { "es": "aire", "bg": "въздух, облик", "part": "съществително" },
  { "es": "cinta adhesiva", "bg": "тиксо", "part": "съществително" },

  { "es": "¿Cómo te encuentras?", "bg": "Как се чувстваш?", "part": "израз" },
  { "es": "sentirse", "bg": "чувствам се", "part": "глагол" },
  { "es": "definitivo", "bg": "постоянен", "part": "прилагателно" },
  { "es": "recorrer el mundo", "bg": "обикалям света", "part": "глаголен израз" },
  { "es": "un empleo", "bg": "работа", "part": "съществително" },
  { "es": "dar el primer paso", "bg": "правя първата стъпка", "part": "израз" },
  { "es": "algo de dinero", "bg": "с някакви пари", "part": "съществително словосъчетание" },
  { "es": "asombrarse", "bg": "учудвам се", "part": "глагол" },
  { "es": "asombro", "bg": "учуда", "part": "съществително" },
  { "es": "vocacional", "bg": "професионален", "part": "прилагателно" },
  { "es": "agobiarse", "bg": "притеснявам се (по-силно)", "part": "глагол" },
  { "es": "preocuparse", "bg": "притеснявам се", "part": "глагол" },
  { "es": "agobio", "bg": "тревога, притеснение", "part": "съществително" },
  { "es": "cabezoto", "bg": "твърдоглав", "part": "прилагателно" },
  { "es": "campamento de verano", "bg": "летен лагер", "part": "съществително" },
  { "es": "equilibrio", "bg": "баланс", "part": "съществително" },
  { "es": "voluntariado", "bg": "доброволчество", "part": "съществително" },

  { "es": "no tener ni un duro", "bg": "нямам никакви пари", "part": "идиом" },
  { "es": "no tener mucha pasta", "bg": "нямам много пари", "part": "идиом" },
  { "es": "no tener mucho dinero", "bg": "нямам много пари", "part": "идиом" },
  { "es": "estoy peleado", "bg": "скаран съм", "part": "израз" },

  { "es": "trueque", "bg": "бартер", "part": "съществително" },
  { "es": "tatuarse", "bg": "татуирам се", "part": "глагол" },
  { "es": "tatuaje", "bg": "татуировка", "part": "съществително" },

  { "es": "asesorar", "bg": "съветвам", "part": "глагол" },
  { "es": "el abogado asesora a sus clientes", "bg": "адвокатът съветва клиентите си", "part": "примерно изречение" },
  { "es": "aconsejar", "bg": "съветвам", "part": "глагол" },
  { "es": "un amigo te aconseja", "bg": "приятел те съветва", "part": "примерно изречение" },

  { "es": "universitario", "bg": "студент в университет", "part": "съществително/прилагателно" },
  { "es": "integrante", "bg": "участник", "part": "съществително" },
  { "es": "impulsar", "bg": "стимулирам", "part": "глагол" },
  { "es": "entregar", "bg": "връчвам, предавам", "part": "глагол" },

  { "es": "revista", "bg": "списание", "part": "съществително" },
  { "es": "abismo", "bg": "пропаст, бездна", "part": "съществително" },
  { "es": "dato", "bg": "данни, информация", "part": "съществително" },
  { "es": "destacar", "bg": "отбелязвам, подчертавам", "part": "глагол" },

  { "es": "taller", "bg": "работилница", "part": "съществително" },
  { "es": "coleta", "bg": "опашка (прическа)", "part": "съществително" },
  { "es": "asistir", "bg": "присъствам", "part": "глагол" },
  { "es": "enunciado", "bg": "твърдение", "part": "съществително" },
  { "es": "actuación", "bg": "изпълнение", "part": "съществително" },
  { "es": "avisar", "bg": "уведомявам", "part": "глагол" },
  { "es": "inauguración", "bg": "откриване", "part": "съществително" },
  { "es": "la inauguración de un restaurante", "bg": "откриването на ресторант", "part": "примерно изречение" },

  { "es": "norma", "bg": "правило", "part": "съществително" },
  { "es": "selección", "bg": "конкурс, подбор", "part": "съществително" },
  { "es": "ocuparse de alguien", "bg": "грижа се за някого", "part": "глаголен израз" },
  { "es": "cuidar a", "bg": "грижа се за", "part": "глагол" },
  { "es": "a partir de", "bg": "от, започвайки от", "part": "израз" },
  { "es": "a partir de los 8 años", "bg": "от 8-годишна възраст", "part": "израз" },
  { "es": "poner la tele", "bg": "включвам телевизора", "part": "глаголен израз" },
  { "es": "quitar la tele", "bg": "изключвам телевизора", "part": "глаголен израз" },
  { "es": "encender", "bg": "включвам", "part": "глагол" },
  { "es": "apagar", "bg": "изключвам", "part": "глагол" },
  { "es": "(des)enchufar", "bg": "пъхам/включвам в контакт", "part": "глагол" },
  { "es": "corriente", "bg": "ток", "part": "съществително" },
  { "es": "tener enchufe", "bg": "имам връзки", "part": "идиом" },
  { "es": "enchufe", "bg": "контакт", "part": "съществително" },
  { "es": "no cabe ninguna duda", "bg": "няма никакво съмнение", "part": "идиом" },
  { "es": "cautivo", "bg": "затворник", "part": "съществително" },
  { "es": "prisionero", "bg": "затворник", "part": "съществително" },
  { "es": "prisión", "bg": "затвор", "part": "съществително" },
  { "es": "cárcel", "bg": "затвор", "part": "съществително" },
  { "es": "ingenioso", "bg": "остроумен, изобретателен", "part": "прилагателно" },

  { "es": "arrancar", "bg": "паля кола", "part": "глагол" },
  { "es": "golpear", "bg": "удрям, бия", "part": "глагол" },
  { "es": "pegar", "bg": "удрям, бия", "part": "глагол" },
  { "es": "solidario", "bg": "солидарен", "part": "прилагателно" },
  { "es": "tajantemente", "bg": "категорично", "part": "наречие" },
  { "es": "negar", "bg": "отказвам, отхвърлям", "part": "глагол" },
  { "es": "niego tajantemente", "bg": "категорично отказвам", "part": "израз" },

  { "es": "cambiar de acera", "bg": "отивам на другия тротоар", "part": "глаголен израз" },
  { "es": "hacer socio", "bg": "ставам член", "part": "глаголен израз" },
  { "es": "timbre", "bg": "звънец", "part": "съществително" },
  { "es": "llamar al timbre", "bg": "звъня на звънеца", "part": "глаголен израз" },
  { "es": "deber", "bg": "дължа", "part": "глагол" },
  { "es": "el dinero que te debe", "bg": "парите, които ти дължи", "part": "примерно изречение" },
  { "es": "acabar un trabajo por alguien", "bg": "свършвам работа за някого", "part": "глаголен израз" },
  { "es": "de mala gana", "bg": "неохотно", "part": "израз" },
  { "es": "poner alguna excusa", "bg": "давам оправдание", "part": "глаголен израз" },
  { "es": "ala", "bg": "крило", "part": "съществително" },
  { "es": "pasar de largo", "bg": "подминавам (игнорирам)", "part": "глаголен израз" },

  { "es": "¿Cuánto pesas?", "bg": "Колко тежиш?", "part": "въпрос" },
  { "es": "medir", "bg": "измервам, висок съм", "part": "глагол" },
  { "es": "mido 1.70", "bg": "Висок съм 1.70", "part": "примерно изречение" },
  { "es": "¿Cuánto mides?", "bg": "Колко си висок?", "part": "въпрос" },
  { "es": "enano", "bg": "джудже", "part": "съществително" },
  { "es": "entretenerse", "bg": "забавлявам се", "part": "глагол" },
  { "es": "divertirse", "bg": "забавлявам се", "part": "глагол" },
  { "es": "diversión", "bg": "забавление", "part": "съществително" },
  { "es": "entretenimiento", "bg": "развлечение", "part": "съществително" },

  { "es": "¿Qué número gastas?", "bg": "Какъв номер обувки носиш?", "part": "въпрос" },
  { "es": "ingresar", "bg": "внасям, постъпвам", "part": "глагол" },
  { "es": "ingreso", "bg": "приход", "part": "съществително" },
  { "es": "ingreso dinero en el banco", "bg": "вкарвам пари в банката", "part": "примерно изречение" },
  { "es": "regresar", "bg": "завръщам се", "part": "глагол" },
  { "es": "me da vergüenza", "bg": "срам ме е", "part": "израз" },
  { "es": "eres sin vergüenza", "bg": "безсрамник си", "part": "израз" },
  { "es": "fallecer", "bg": "почивам (умирам)", "part": "глагол" },
  { "es": "fallecimiento", "bg": "смърт (официално)", "part": "съществително" },
  { "es": "fecha de fallecimiento", "bg": "дата на смърт", "part": "съществително словосъчетание" },

  { "es": "me haces reír", "bg": "караш ме да се смея", "part": "израз" },
  { "es": "burlarse", "bg": "подигравам се", "part": "глагол" },
  { "es": "burlonamente", "bg": "подигравателно", "part": "наречие" },
  { "es": "dirigir", "bg": "управлявам", "part": "глагол" },
  { "es": "advertir", "bg": "предупреждавам", "part": "глагол" },
  { "es": "advertencia", "bg": "предупреждение", "part": "съществително" },
  { "es": "avisar", "bg": "уведомявам", "part": "глагол" },
  { "es": "pelea", "bg": "бой, скандал", "part": "съществително" },
  { "es": "reñir", "bg": "карам се", "part": "глагол" },
  { "es": "echar una bronca", "bg": "карам се", "part": "глаголен израз" },
  { "es": "echar la bronca", "bg": "карам се", "part": "глаголен израз" },

  { "es": "un día para el otro", "bg": "от днес за утре", "part": "израз" },
  { "es": "la sensación de", "bg": "усещането за", "part": "съществително словосъчетание" },
  { "es": "agotado", "bg": "изтощен", "part": "прилагателно" },
  { "es": "además de", "bg": "освен", "part": "израз" },
  { "es": "la tienda de campaña", "bg": "палатка", "part": "съществително" },

  { "es": "tirar para adelante", "bg": "продължавам напред", "part": "глаголен израз" },
  { "es": "en solitario", "bg": "в самота", "part": "израз" },
  { "es": "indispensable", "bg": "много необходим", "part": "прилагателно" },
  { "es": "relato", "bg": "разказ, история", "part": "съществително" },
  { "es": "no hay marcha atrás", "bg": "няма връщане назад", "part": "идиом" },

  { "es": "aprobación", "bg": "одобрение", "part": "съществително" },
  { "es": "murmullo", "bg": "шушукане", "part": "съществително" },
  { "es": "aportar", "bg": "допринасям", "part": "глагол" },
  { "es": "contribuir", "bg": "допринасям", "part": "глагол" },
  { "es": "tener algo que decir", "bg": "има какво да каже", "part": "израз" },
  { "es": "rizado", "bg": "къдрав", "part": "прилагателно" },
  { "es": "la piel oscura", "bg": "тъмна кожа", "part": "съществително словосъчетание" },
  { "es": "ancha", "bg": "широк", "part": "прилагателно" },
  { "es": "carbón", "bg": "въглен", "part": "съществително" },
  { "es": "pizarra", "bg": "училищна дъска", "part": "съществително" },
  { "es": "rasgo", "bg": "черта (характеристика)", "part": "съществително" },
  { "es": "en pie de guerra", "bg": "в готовност за битка/предизвикателство", "part": "идиом" },
  { "es": "reto", "bg": "предизвикателство", "part": "съществително" },
  { "es": "desafío", "bg": "предизвикателство", "part": "съществително" },

  { "es": "barrer", "bg": "мета", "part": "глагол" },
  { "es": "barrendero", "bg": "метач", "part": "съществително" },
  { "es": "escoba", "bg": "метла", "part": "съществително" },
  { "es": "recogedor", "bg": "лопатка (за боклук)", "part": "съществително" },
  { "es": "pala", "bg": "лопата", "part": "съществително" },

  { "es": "tengo sueño", "bg": "спи ми се", "part": "израз" },
  { "es": "tengo un sueño", "bg": "имам мечта", "part": "израз" },
  { "es": "sueño contigo", "bg": "мечтая с теб", "part": "израз" },
  { "es": "sueño en ti", "bg": "мечтая за теб", "part": "израз" },
  { "es": "cometer un error", "bg": "допускам грешка", "part": "глаголен израз" },
  { "es": "equivocarse", "bg": "греша", "part": "глагол" },
  { "es": "equivocación", "bg": "грешка", "part": "съществително" },
  { "es": "afirmar", "bg": "твърдя", "part": "глагол" },
  { "es": "ama de casa", "bg": "домакиня", "part": "съществително" },
  { "es": "estar en paro", "bg": "безработен", "part": "израз" },
  { "es": "estar parado/a", "bg": "безработен", "part": "израз" },
  { "es": "estar desempleado", "bg": "безработен", "part": "израз" },
  { "es": "una vida atípica", "bg": "нетипичен живот", "part": "съществително словосъчетание" },
  { "es": "bucear", "bg": "гмуркам се", "part": "глагол" },
  { "es": "trébol", "bg": "четирилистна детелина", "part": "съществително" },

  { "es": "atrapar", "bg": "падам в капан", "part": "глагол" },
  { "es": "extraviar", "bg": "отклонявам се", "part": "глагол" },
  { "es": "rumbo", "bg": "посока", "part": "съществително" },
  { "es": "reflexionar", "bg": "разсъждавам", "part": "глагол" },
  { "es": "estallar", "bg": "избухвам", "part": "глагол" },
  { "es": "empantanar(se)", "bg": "вглъбявам се", "part": "глагол" },
  { "es": "calmar(se)", "bg": "успокоявам се", "part": "глагол" },
  { "es": "tranquilizar(se)", "bg": "успокоявам се", "part": "глагол" },
  { "es": "supersticioso", "bg": "суеверен", "part": "прилагателно" },

  { "es": "conmocionar", "bg": "разтърсвам (емоционално)", "part": "глагол" },
  { "es": "subsistir", "bg": "преживявам, оцелявам", "part": "глагол" },
  { "es": "trabajar de sol a sol", "bg": "работя от изгрев до залез", "part": "идиом" },
  { "es": "analfabeto", "bg": "неграмотен", "part": "прилагателно/съществително" },
  { "es": "herencia", "bg": "наследство", "part": "съществително" },
  { "es": "heredar", "bg": "наследявам", "part": "глагол" },
  { "es": "percibir", "bg": "получавам (финансово)", "part": "глагол" },
  { "es": "recibir", "bg": "получавам", "part": "глагол" },
  { "es": "la mayoría de edad", "bg": "пълнолетие", "part": "съществително словосъчетание" },
  { "es": "el campo", "bg": "провинция", "part": "съществително" },
  
  
  
  { "es": "conocerse mejor", "bg": "по-добре да се опозная", "part": "глагол/израз" },
  { "es": "cuadro", "bg": "картина", "part": "съществително" },
  { "es": "neurótico", "bg": "невротичен", "part": "прилагателно" },
  { "es": "neurasténico", "bg": "неврастеничен", "part": "прилагателно" },
  { "es": "desobediente", "bg": "непослушен", "part": "прилагателно" },
  { "es": "insensato", "bg": "безразсъден", "part": "прилагателно" },
  { "es": "cumplidor", "bg": "отговорен/с изпълнение", "part": "прилагателно" },
  { "es": "retraído", "bg": "затворен/срамежлив", "part": "прилагателно" },
  { "es": "rebelde", "bg": "бунтовен", "part": "прилагателно" },
  { "es": "cobarde", "bg": "страхлив", "part": "прилагателно" },
  { "es": "aprensivo", "bg": "тревожен/опаслив", "part": "прилагателно" },
  { "es": "encantador", "bg": "очарователен", "part": "прилагателно" },
  { "es": "entrevistar", "bg": "интервюирам", "part": "глагол" },
  { "es": "sentimiento", "bg": "чувство/сензация", "part": "съществително" },
  { "es": "erróneo", "bg": "погрешен", "part": "прилагателно" },
  { "es": "escasamente", "bg": "едва", "part": "наречие" },
  { "es": "propenso a", "bg": "склонен към", "part": "израз/прилагателно" },
  { "es": "puntuar", "bg": "оценявам/оценка", "part": "глагол" },
  { "es": "colocar", "bg": "поставям", "part": "глагол" },
  { "es": "señalar a", "bg": "посочвам към", "part": "глагол" },
  { "es": "envenenar a", "bg": "отравям", "part": "глагол" },
  { "es": "somnífero", "bg": "средство за сън", "part": "съществително" },
  { "es": "denunciar", "bg": "декларирам/сигнализирам", "part": "глагол" },
  { "es": "ya caigo", "bg": "разбирам вече", "part": "израз" },
  { "es": "verter", "bg": "изливам", "part": "глагол" },
  { "es": "residuo", "bg": "остатък", "part": "съществително" },
  { "es": "panadería", "bg": "пекарна", "part": "съществително" },
  { "es": "abrigo", "bg": "палто", "part": "съществително" },
  { "es": "cuerda", "bg": "въже", "part": "съществително" },
  { "es": "agarrar", "bg": "хващам", "part": "глагол" },
  { "es": "atravesar", "bg": "пресичам/пробивам", "part": "глагол" },
  { "es": "saltar", "bg": "скачам", "part": "глагол" },
  { "es": "sujetar", "bg": "държа/закрепвам", "part": "глагол" },
  { "es": "instalarse en", "bg": "настанявам се в", "part": "глагол/израз" },
  { "es": "rodar una película", "bg": "снимам филм", "part": "глагол/израз" },
  { "es": "acudir a", "bg": "отивам на", "part": "глагол/израз" },
  { "es": "estrenar", "bg": "премиерно представям/нося за първи път", "part": "глагол" },
  { "es": "pantallas", "bg": "екрани", "part": "съществително" },
  { "es": "tuvo una buena acogida", "bg": "получи добро посрещане", "part": "израз" },
  { "es": "taquilla", "bg": "каса", "part": "съществително" },
  { "es": "barrunto", "bg": "подозрение", "part": "съществително" },
  { "es": "presentimiento", "bg": "предчувствие", "part": "съществително" },
  { "es": "prolegómenos", "bg": "въведение/пролог", "part": "съществително" },
  { "es": "delegación", "bg": "делегация", "part": "съществително" },
  { "es": "saboreo", "bg": "наслаждавам се на вкус", "part": "глагол/съществително" },
  { "es": "abrir brechas", "bg": "правя пробиви", "part": "глагол/израз" },
  { "es": "paraje", "bg": "място/спот", "part": "съществително" },
  { "es": "acontecimiento", "bg": "събитие", "part": "съществително" },
  { "es": "hacer cola", "bg": "чакaм на опашка", "part": "глагол/израз" },
  { "es": "contemplación", "bg": "съзерцание", "part": "съществително" },
  { "es": "incidencias", "bg": "инциденти/прояви", "part": "съществително" },
  { "es": "cartelera", "bg": "афиш/разписание на събития", "part": "съществително" },
  
  { "es": "cotidiano", "bg": "ежедневен", "part": "прилагателно" },
  { "es": "guardar cama", "bg": "да стоя в легло", "part": "глагол/израз" },
  { "es": "proporcionar", "bg": "осигурявам/предоставям", "part": "глагол" },
  { "es": "acceso a", "bg": "достъп до", "part": "съществително/израз" },
  { "es": "violencia de género", "bg": "домашно/полово насилие", "part": "съществително" },
  { "es": "impartir", "bg": "преподавам/предавам", "part": "глагол" },
  { "es": "menospreciar", "bg": "подценявам", "part": "глагол" },
  { "es": "callejero", "bg": "уличен", "part": "прилагателно" },
  { "es": "guardería", "bg": "ясла", "part": "съществително" },
  { "es": "emitir", "bg": "излъчвам", "part": "глагол" },
  { "es": "resulta que", "bg": "оказва се, че", "part": "израз" },
  { "es": "me resulta fácil", "bg": "намирам го за лесно", "part": "израз" },
  { "es": "compañía de seguros", "bg": "застрахователна компания", "part": "съществително" },
  { "es": "todo riesgo", "bg": "пълно авто каско", "part": "съществително/израз" },
  { "es": "en cuanto a", "bg": "по отношение на", "part": "израз" },
  { "es": "infusión", "bg": "запарка/чай", "part": "съществително" },
  { "es": "menta poleo", "bg": "мента чай", "part": "съществително" },
  { "es": "belleza", "bg": "красота", "part": "съществително" },
  { "es": "fiarse de", "bg": "доверявам се на", "part": "глагол/израз" },
  { "es": "mantecado", "bg": "масленка/сладка", "part": "съществително" },
  { "es": "harina", "bg": "брашно", "part": "съществително" },
  { "es": "almendra", "bg": "бадем", "part": "съществително" },
  { "es": "esperanza de vida", "bg": "продължителност на живот", "part": "съществително" },
  { "es": "avance", "bg": "напредък", "part": "съществително" },
  { "es": "hay avances en la medicina", "bg": "Има напредък в медицината", "part": "изречение" },
  { "es": "fuente de información", "bg": "източник на информация", "part": "съществително" },
  { "es": "(acceso a) medicamentos", "bg": "лекарства", "part": "съществително" },
  { "es": "curandero", "bg": "лечител", "part": "съществително" },
  { "es": "intervención", "bg": "операция (в хирургия)", "part": "съществително" },
  { "es": "hecho", "bg": "факт", "part": "съществително" },
  { "es": "eficaz", "bg": "ефикасен", "part": "прилагателно" },
  { "es": "vacuna", "bg": "ваксина", "part": "съществително" },
  { "es": "prevenir enfermedades", "bg": "предотвратявам болести", "part": "глагол" },
  { "es": "el avance tecnológico", "bg": "технологически напредък", "part": "съществително" },

  { "es": "falacia", "bg": "заблуда", "part": "съществително" },
  { "es": "compatriota", "bg": "сънародник", "part": "съществително" },
  { "es": "patria", "bg": "родина", "part": "съществително" },
  { "es": "acerca de", "bg": "по отношение на", "part": "израз" },
  { "es": "atajo", "bg": "пряк път", "part": "съществително" },
  { "es": "prejuicio", "bg": "предразсъдък", "part": "съществително" },
  { "es": "Europa occidental/de occidente", "bg": "Западна Европа", "part": "съществително" },
  { "es": "Europa oriental/de oriente", "bg": "Източна Европа", "part": "съществително" },
  { "es": "delincuencia", "bg": "престъпност", "part": "съществително" },
  { "es": "la tesis", "bg": "дипломна работа", "part": "съществително" },
  { "es": "veneno", "bg": "отрова", "part": "съществително" },
  { "es": "arbusto", "bg": "храст", "part": "съществително" },
  { "es": "tremendo", "bg": "ужасен", "part": "прилагателно" },
  { "es": "ropa de abrigo", "bg": "дебели дрехи", "part": "съществително" },
  { "es": "abrigar", "bg": "обличам се дебело", "part": "глагол" },
  { "es": "salvar", "bg": "спасявам", "part": "глагол" },
  { "es": "quieto", "bg": "спокоен, мирен", "part": "прилагателно" },
  { "es": "estar quieto", "bg": "стоя мирно", "part": "израз" },
  { "es": "enseres = pertenencias", "bg": "вещи", "part": "съществително" },
  { "es": "ostras", "bg": "по дяволите", "part": "междуметие" },
  { "es": "amontonar", "bg": "натрупвам", "part": "глагол" },
  { "es": "zarzuela", "bg": "оперета", "part": "съществително" },
  { "es": "dar a luz", "bg": "раждам", "part": "глагол" },
  
  { "es": "engordar", "bg": "напълнявам", "part": "глагол" },
  { "es": "adelgazar", "bg": "отслабвам", "part": "глагол" },
  { "es": "muñeco de nieve", "bg": "снежен човек", "part": "съществително" },
  { "es": "un homenaje", "bg": "в чест на", "part": "израз" },
  { "es": "acoger", "bg": "приемам", "part": "глагол" },
  { "es": "arrasar", "bg": "помитам (фигуративно: с успех)", "part": "глагол" },
  { "es": "alternar", "bg": "съчетавам", "part": "глагол" },

  { "es": "atar", "bg": "връзвам, завръзвам", "part": "глагол" },
  { "es": "recaudar", "bg": "събирам средства", "part": "глагол" },
  { "es": "sabio", "bg": "мъдър", "part": "прилагателно" },
  { "es": "sabiduría", "bg": "мъдрост", "part": "съществително" },
  { "es": "prescindir de", "bg": "мога без...", "part": "глаголен израз" },
  { "es": "no puedo prescindir de mi teléfono", "bg": "не мога без телефона си", "part": "изречение" },
  { "es": "patinete electrónico", "bg": "електрическа тротинетка", "part": "съществително" },
  { "es": "ratón", "bg": "мишка", "part": "съществително" },
  { "es": "almacenar", "bg": "складирам", "part": "глагол" },
  { "es": "congelador", "bg": "фризер", "part": "съществително" },
  { "es": "congelar", "bg": "замръзвам", "part": "глагол" },

  { "es": "quemar calorías", "bg": "горя калории", "part": "глаголен израз" },
  { "es": "asemejarse a", "bg": "наподобявам, прилича на", "part": "глаголен израз" },
  { "es": "sumergirse", "bg": "подлагам се на", "part": "глагол" },
  { "es": "admitir", "bg": "признавам, допускам", "part": "глагол" },
  { "es": "invadir", "bg": "превземам", "part": "глагол" },
  { "es": "relaciones estrechas", "bg": "много близки отношения", "part": "израз" },
  { "es": "aislarse", "bg": "изолирам се", "part": "глагол" },
  { "es": "contestador automático", "bg": "гласова поща", "part": "съществително" },
  { "es": "olla", "bg": "тенджера", "part": "съществително" },
  { "es": "sartén", "bg": "тиган", "part": "съществително" },
  { "es": "cazuela", "bg": "гювеч", "part": "съществително" },
  { "es": "cazo", "bg": "малка тенджера, черпак", "part": "съществително" },
  { "es": "placa", "bg": "плоча", "part": "съществително" },
  { "es": "jarrón", "bg": "ваза", "part": "съществително" },
  { "es": "batidora", "bg": "миксер", "part": "съществително" },
  { "es": "asar", "bg": "печа", "part": "глагол" },
  { "es": "lavabo", "bg": "мивка в баня", "part": "съществително" },
  { "es": "lavar", "bg": "мия", "part": "глагол" },

  { "es": "congregar a", "bg": "събират се", "part": "глаголен израз" },
  { "es": "presencial", "bg": "лице в лице", "part": "прилагателно" },
  { "es": "una reunión presencial", "bg": "среща лице в лице", "part": "израз" },
  { "es": "recordatorio", "bg": "напомняне", "part": "съществително" },
  { "es": "muñeca", "bg": "кукла, китка", "part": "съществително" },
  { "es": "dispositivo", "bg": "устройство", "part": "съществително" },
  { "es": "dispositivo electrónico", "bg": "електронно устройство", "part": "съществително" },
  { "es": "utensilio", "bg": "уред", "part": "съществително" }
    ];

      // game state
      let remaining = []; // queue of remaining pairs to display
      let current = []; // currently visible up to 4 slots -- objects {pairId, es, bg, slot}
      let matchedSlots = new Set();
      let selected = {side:null, id:null}; // {side:'left'|'right', id:slot}
      let correct = 0, wrong = 0;

      const LEFT_LIST = document.getElementById('left-list');
      const RIGHT_LIST = document.getElementById('right-list');
      const REMAINING_LABEL = document.getElementById('remaining');
      const PROG = document.getElementById('progress-bar');
      const CORRECT_COUNT = document.getElementById('correct-count');
      const WRONG_COUNT = document.getElementById('wrong-count');
      const RESTART = document.getElementById('restart');
      const MODAL_ROOT = document.getElementById('modal-root');

      function shuffle(arr){
        for(let i=arr.length-1;i>0;i--){
          const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];
        }
      }

      function init(){
        // create a shuffled copy of pool
        remaining = POOL.map((p, i)=> ({id:i, es:p.es, bg:p.bg}));
        shuffle(remaining);
        // reset stats
        matchedSlots = new Set();
        current = [];
        correct = 0; wrong = 0;
        selected = {side:null, id:null};
        CORRECT_COUNT.textContent = '0'; WRONG_COUNT.textContent='0';
        fillInitial();
        updateRemainingLabel();
        updateProgress();
        clearModal();
      }

      function fillInitial(){
        // take up to 4 from remaining
        for(let i=0;i<4;i++){
          if(remaining.length>0){
            const p = remaining.shift();
            current.push({slot:i, ...p, state:'active'});
          } else {
            // empty slot placeholder
            current.push({slot:i, id:null, es:'', bg:'', state:'empty'});
          }
        }
        render();
      }

      function render(){
        // left: Spanish in order of slots
        LEFT_LIST.innerHTML='';
        RIGHT_LIST.innerHTML='';
        // create left buttons
        current.forEach(slotObj => {
          const btn = document.createElement('button');
          btn.className = 'word-btn fade-in';
          btn.dataset.slot = slotObj.slot;
          btn.dataset.side = 'left';
          btn.disabled = (slotObj.state==='matched' || slotObj.state==='disabled' || !slotObj.id);
          if(slotObj.state==='disabled') btn.classList.add('disabled');
          if(slotObj.state==='matched') btn.classList.add('matched');
          btn.innerHTML = `<span>${slotObj.es||' '}</span>`;
          btn.addEventListener('click', onWordClick);
          LEFT_LIST.appendChild(btn);
        });
        // create right buttons but shuffled order of the 4 bg words
        const rightOrder = current.map(c=>c).filter(c=>c.id!==null);
        shuffle(rightOrder);
        // map slot->element id
        rightOrder.forEach(slotObj => {
          const btn = document.createElement('button');
          btn.className = 'word-btn fade-in';
          btn.dataset.slot = slotObj.slot;
          btn.dataset.side = 'right';
          btn.disabled = (slotObj.state==='matched' || slotObj.state==='disabled' || !slotObj.id);
          if(slotObj.state==='disabled') btn.classList.add('disabled');
          if(slotObj.state==='matched') btn.classList.add('matched');
          btn.innerHTML = `<span>${slotObj.bg||' '}</span>`;
          btn.addEventListener('click', onWordClick);
          RIGHT_LIST.appendChild(btn);
        });
      }

      function findCurrentBySlot(slot){
        return current.find(c=>c.slot==slot);
      }

      function onWordClick(e){
        const btn = e.currentTarget;
        if(btn.classList.contains('disabled') || btn.classList.contains('matched')) return;
        const side = btn.dataset.side;
        const slot = Number(btn.dataset.slot);
        // if clicked twice on same selected -> deselect
        if(selected.side===side && selected.id===slot){
          // deselect
          clearPressed(side, slot);
          selected = {side:null,id:null};
          return;
        }

        // visual press
        clearAllPressedOnSide(side);
        btn.classList.add('pressed');
        selected = {side, id:slot};

        // if both sides selected -> evaluate
        if(selected.side && selected.id!==null){
          // need both a left and right selection
          const otherSide = side==='left' ? 'right' : 'left';
          // find pressed on other side
          const otherBtn = findPressedButton(otherSide);
          if(otherBtn){
            // both selected: compare
            evaluateMatch(Number(btn.dataset.slot), Number(otherBtn.dataset.slot));
          }
        }
      }

      function findPressedButton(side){
        const list = side==='left' ? LEFT_LIST : RIGHT_LIST;
        return list.querySelector('.word-btn.pressed');
      }

      function clearPressed(side, slot){
        const list = side==='left' ? LEFT_LIST : RIGHT_LIST;
        const btn = list.querySelector(`.word-btn[data-slot='${slot}']`);
        if(btn) btn.classList.remove('pressed');
      }

      function clearAllPressedOnSide(side){
        const list = side==='left' ? LEFT_LIST : RIGHT_LIST;
        const btns = list.querySelectorAll('.word-btn.pressed');
        btns.forEach(b=>b.classList.remove('pressed'));
      }

      function evaluateMatch(slotA, slotB){
        // slotA is side of the last clicked (maybe left or right), but we need to map to pair ids
        const leftBtn = LEFT_LIST.querySelector(`.word-btn[data-slot='${slotA}']`)?.dataset.side==='left' ? LEFT_LIST.querySelector(`.word-btn[data-slot='${slotA}']`) : LEFT_LIST.querySelector(`.word-btn.pressed`);
        // find the two pressed buttons explicitly
        const leftPressed = LEFT_LIST.querySelector('.word-btn.pressed');
        const rightPressed = RIGHT_LIST.querySelector('.word-btn.pressed');
        if(!leftPressed || !rightPressed) return; // accidental

        const leftSlot = Number(leftPressed.dataset.slot);
        const rightSlot = Number(rightPressed.dataset.slot);
        const leftObj = findCurrentBySlot(leftSlot);
        const rightObj = findCurrentBySlot(rightSlot);
        // safety
        if(!leftObj || !rightObj || !leftObj.id || !rightObj.id) return;
        // check match by original pair id
        const isMatch = leftObj.id === rightObj.id;
        if(isMatch){
          correct++;
          CORRECT_COUNT.textContent = String(correct);
          leftPressed.classList.add('matched');
          rightPressed.classList.add('matched');
          // keep pressed state until vanish
          setTimeout(()=>{
            // vanish both with fade-out
            leftPressed.classList.add('fade-out');
            rightPressed.classList.add('fade-out');
            // after fade, remove and replace slot
            setTimeout(()=>{
              // mark slot as matched and replace with next pair or disabled/empty
              handleCorrectMatch(leftSlot, rightSlot);
            }, 250);
          }, 250);
        } else {
          wrong++;
          WRONG_COUNT.textContent = String(wrong);
          leftPressed.classList.add('wrong');
          rightPressed.classList.add('wrong');
          // keep red for 0.7s, then revert
          setTimeout(()=>{
            leftPressed.classList.remove('wrong','pressed');
            rightPressed.classList.remove('wrong','pressed');
            // small flash
          }, 700);
        }
        // reset selected
        selected = {side:null,id:null};
      }

      function handleCorrectMatch(leftSlot, rightSlot){
        // find which current items correspond to slots
        const leftIndex = current.findIndex(c=>c.slot===leftSlot);
        const rightIndex = current.findIndex(c=>c.slot===rightSlot);
        // clear DOM children (we will re-render after replacing)
        // mark these slots as matched (so the buttons appear greyed/removed)
        if(leftIndex!==-1) current[leftIndex].state='matched';
        if(rightIndex!==-1) current[rightIndex].state='matched';
        // Immediately try to fill slots from remaining
        // But if no remaining left, we should eventually disable (gray) them
        // Replace each matched slot with next pair if available after a small delay (1s effect)
        setTimeout(()=>{
          [leftSlot, rightSlot].forEach(slot => {
            const idx = current.findIndex(c=>c.slot===slot);
            if(idx===-1) return;
            if(remaining.length>0){
              const next = remaining.shift();
              current[idx] = {slot:slot, ...next, state:'active'};
            } else {
              // mark disabled (no more new words)
              current[idx] = {slot:slot, id:null, es:'', bg:'', state:'disabled'};
            }
          });
          // re-render
          render();
          updateRemainingLabel();
          updateProgress();
          checkForEndCondition();
        }, 900);
      }

      function checkForEndCondition(){
        // if all current slots are disabled (no id) OR matched/disabled, and no remaining
        const allDisabled = current.every(c => c.state==='disabled' || c.state==='matched' || c.id===null);
        const anyActive = current.some(c=>c.state==='active');
        if(!anyActive && remaining.length===0){
          // final matched boxes should turn gray after matching and become unusable gradually
          // ensure all are disabled state
          current = current.map(c=> ({slot:c.slot, id:null, es:'', bg:'', state:'disabled'}));
          render();
          // pop modal 1 second after game's end
          setTimeout(showEndModal, 1000);
        }
      }

      function updateRemainingLabel(){
        const totalLeft = remaining.length + current.filter(c=>c.id!==null && (c.state==='active' || c.state==='matched')).length;
        REMAINING_LABEL.textContent = `Remaining: ${totalLeft}`;
      }

      function updateProgress(){
        const totalPairs = POOL.length;
        const completed = correct;
        const pct = Math.round((completed/totalPairs)*100);
        PROG.style.width = pct + '%';
      }

      function showEndModal(){
        const total = correct + wrong;
        const correctPct = total ? Math.round((correct/total)*100) : 0;
        const wrongPct = total ? 100 - correctPct : 0;
        MODAL_ROOT.innerHTML = `
          <div class="modal-backdrop">
            <div class="modal" role="dialog" aria-modal="true">
              <button class="x" id="modal-x" title="Go to Google">✕</button>
              <h2>Game complete</h2>
              <div class="subtitle">Your results</div>
              <div class="row" style="margin-top:14px">
                <div class="stat-card">
                  <div class="label">Correct</div>
                  <div class="value">${correct}</div>
                  <div class="label" style="margin-top:6px">${correctPct}%</div>
                </div>
                <div class="stat-card">
                  <div class="label">Wrong</div>
                  <div class="value">${wrong}</div>
                  <div class="label" style="margin-top:6px">${wrongPct}%</div>
                </div>
              </div>

              <div style="display:flex; gap:10px; margin-top:18px; justify-content:flex-end">
                <button class="btn" id="modal-restart">Restart</button>
              </div>
            </div>
          </div>
        `;
        document.getElementById('modal-x').addEventListener('click', ()=>{ window.location.href = 'https://www.google.com'; });
        document.getElementById('modal-restart').addEventListener('click', ()=>{ init(); });
      }

      function clearModal(){ MODAL_ROOT.innerHTML = ''; }

      RESTART.addEventListener('click', ()=> init());

      // small accessibility: allow Enter/Space when focused on buttons
      document.addEventListener('keydown', (e)=>{
        if(e.key==='Escape'){
          // close modal if present
          clearModal();
        }
      });

      // initialize on load
      init();
    })();
  </script>
</body>
</html>
